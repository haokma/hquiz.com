{"ast":null,"code":"var _jsxFileName = \"/home/haopc/Desktop/Workspace/hquiz.com/CMS/src/features/SubCategory/pages/List.js\",\n    _s = $RefreshSig$();\n\nimport plusFill from '@iconify/icons-eva/plus-fill';\nimport { Icon } from '@iconify/react';\nimport { Box, Button, Card, Checkbox, CircularProgress, Container, Dialog, DialogActions, DialogContent, DialogContentText, DialogTitle, FormControl, Grid, MenuItem, Select, Stack, Table, TableBody, TableCell, TableContainer, TablePagination, TableRow, Typography, InputLabel, TextField, Autocomplete } from '@material-ui/core';\nimport categoryApi from 'apis/categoryApi';\nimport { sentenceCase } from 'change-case';\nimport { ListToolbar, MoreMenu, TableHeadList } from 'components/common';\nimport Label from 'components/Label';\nimport Page from 'components/Page';\nimport Scrollbar from 'components/Scrollbar';\nimport { STATUS_LIST } from 'constants/index';\nimport React, { useCallback, useEffect, useState } from 'react';\nimport { Link as RouterLink, useHistory } from 'react-router-dom';\nimport { toast } from 'react-toastify';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst TABLE_HEAD = [{\n  id: 'title',\n  label: 'Title',\n  alignRight: false\n}, {\n  id: 'id',\n  label: 'Id',\n  alignRight: false\n}, {\n  id: 'slug',\n  label: 'Slug',\n  alignRight: false\n}, {\n  id: 'status',\n  label: 'Status',\n  alignRight: false\n}, {\n  id: ''\n}];\nexport const ListSubCategory = () => {\n  _s();\n\n  const history = useHistory();\n  const [loading, setLoading] = useState(false);\n  const [loadingCategory, setLoadingCategory] = useState(false);\n  const [count, setCount] = useState(20);\n  const [open, setOpen] = useState(false);\n  const [openSelect, setOpenSelect] = useState(false);\n  const [categoryList, setCategoryList] = useState([]);\n  const [idDelete, setIdDelete] = useState([]);\n  const [list, setList] = useState([]);\n  const [selected, setSelected] = useState([]);\n  const [filters, setFilters] = useState({\n    order: 'asc',\n    orderBy: 'title',\n    page: 0,\n    limit: 20,\n    title_like: '',\n    status: ''\n  });\n  const fetchSubCategoryList = useCallback(async filters => {\n    try {\n      setLoading(true);\n      const res = await categoryApi.getSubList({ ...filters,\n        page: filters.page + 1\n      });\n      const {\n        category,\n        pagination\n      } = res.data;\n      setCategoryList(category);\n      setCount(pagination._total);\n      setLoading(false);\n    } catch (error) {\n      console.log(error);\n      setLoading(false);\n      setCategoryList([]);\n    }\n  }, []);\n\n  const fetchCategoryList = async filters => {\n    try {\n      setLoadingCategory(true);\n      const res = await categoryApi.getList(filters);\n      const {\n        categoryList\n      } = res.data;\n      setList(categoryList);\n      setLoadingCategory(false);\n    } catch (error) {\n      setLoadingCategory(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchSubCategoryList(filters);\n  }, [fetchSubCategoryList, filters]);\n  useEffect(() => {\n    if (!openSelect) {\n      setList([]);\n    }\n  }, [openSelect]); // Function Table\n\n  const handleSelectAllClick = event => {\n    if (event.target.checked) {\n      const newSelecteds = categoryList.map(category => category._id);\n      setSelected(newSelecteds);\n      return;\n    }\n\n    setSelected([]);\n  };\n\n  const handleClick = (event, name) => {\n    const selectedIndex = selected.indexOf(name);\n    let newSelected = [];\n\n    if (selectedIndex === -1) {\n      newSelected = newSelected.concat(selected, name);\n    } else if (selectedIndex === 0) {\n      newSelected = newSelected.concat(selected.slice(1));\n    } else if (selectedIndex === selected.length - 1) {\n      newSelected = newSelected.concat(selected.slice(0, -1));\n    } else if (selectedIndex > 0) {\n      newSelected = newSelected.concat(selected.slice(0, selectedIndex), selected.slice(selectedIndex + 1));\n    }\n\n    setSelected(newSelected);\n  };\n\n  const onRequestSort = (event, property) => {\n    const isAsc = property === filters.orderBy && filters.order === 'asc';\n    setFilters(prev => ({ ...prev,\n      order: isAsc ? 'desc' : 'asc',\n      orderBy: property\n    }));\n  };\n\n  const handleChangePage = (event, newPage) => {\n    setFilters(prev => ({ ...prev,\n      page: newPage\n    }));\n  };\n\n  const handleChangeRowsPerPage = event => {\n    setFilters(prev => ({ ...prev,\n      limit: parseInt(event.target.value, 10),\n      page: 0\n    }));\n  }; // Handle Sub Category\n\n\n  const handleDelete = categoryId => {\n    setOpen(true);\n\n    if (typeof categoryId === 'string') {\n      setIdDelete([].concat(categoryId));\n      return;\n    }\n\n    setIdDelete(categoryId);\n  };\n\n  const onDeleteCategory = async () => {\n    try {\n      await categoryApi.delete(idDelete);\n      fetchSubCategoryList(filters);\n      toast.success('Xóa danh mục con thành công');\n    } catch (error) {\n      toast(error.response.data.error);\n    }\n\n    setOpen(false);\n    setSelected([]);\n  };\n\n  const handleFilterByName = search => {\n    setFilters(prev => ({ ...prev,\n      title_like: search\n    }));\n  }; // Handle Sub Category\n\n\n  const handleChangSearchTopic = search => {\n    fetchCategoryList({\n      limit: 1000,\n      title_like: search\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Page, {\n      title: \"Danh m\\u1EE5c con | CMS\",\n      children: /*#__PURE__*/_jsxDEV(Container, {\n        maxWidth: \"2xl\",\n        children: [/*#__PURE__*/_jsxDEV(Stack, {\n          direction: \"row\",\n          alignItems: \"center\",\n          justifyContent: \"space-between\",\n          mb: 5,\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"h4\",\n            gutterBottom: true,\n            children: \"Danh m\\u1EE5c con\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"contained\",\n            component: RouterLink,\n            to: \"/dashboard/category/create\",\n            startIcon: /*#__PURE__*/_jsxDEV(Icon, {\n              icon: plusFill\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 196,\n              columnNumber: 26\n            }, this),\n            children: \"T\\u1EA1o danh m\\u1EE5c con\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 192,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Card, {\n          children: [/*#__PURE__*/_jsxDEV(ListToolbar, {\n            numSelected: selected.length,\n            onFilterName: handleFilterByName,\n            handleDelete: () => handleDelete(selected)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 202,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            container: true,\n            padding: 1,\n            pb: 4,\n            spacing: 1,\n            children: [/*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 3,\n              children: /*#__PURE__*/_jsxDEV(Autocomplete // defaultValue=\"\"\n              , {\n                fullWidth: true,\n                open: openSelect,\n                onOpen: () => setOpenSelect(true),\n                onClose: () => setOpenSelect(false),\n                id: \"category\",\n                options: list,\n                getOptionLabel: option => option.title,\n                getOptionSelected: (option, value) => option.title === value.title,\n                onInputChange: event => handleChangSearchTopic(event.target.value),\n                onChange: (event, value) => setFilters(prev => ({ ...prev,\n                  parentId: (value === null || value === void 0 ? void 0 : value._id) || ''\n                })),\n                renderInput: params => /*#__PURE__*/_jsxDEV(TextField, { ...params,\n                  label: \"\\u0110\\u1EC1 thi\",\n                  variant: \"outlined\",\n                  InputProps: { ...params.InputProps,\n                    endAdornment: /*#__PURE__*/_jsxDEV(_Fragment, {\n                      children: [loadingCategory ? /*#__PURE__*/_jsxDEV(CircularProgress, {\n                        color: \"inherit\",\n                        size: 20\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 236,\n                        columnNumber: 31\n                      }, this) : null, params.InputProps.endAdornment]\n                    }, void 0, true)\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 227,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 209,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 208,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 2,\n              children: /*#__PURE__*/_jsxDEV(FormControl, {\n                variant: \"outlined\",\n                fullWidth: true,\n                children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n                  id: \"status\",\n                  children: \"Tr\\u1EA1ng th\\xE1i\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 248,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Select, {\n                  defaultValue: \"\",\n                  labelId: \"status\",\n                  id: \"status\",\n                  label: \"Tr\\u1EA1ng th\\xE1i\",\n                  onChange: event => setFilters(prev => ({ ...prev,\n                    status: event.target.value\n                  })),\n                  children: [/*#__PURE__*/_jsxDEV(MenuItem, {\n                    value: \"\",\n                    children: /*#__PURE__*/_jsxDEV(\"em\", {\n                      children: \"T\\u1EA5t c\\u1EA3\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 262,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 261,\n                    columnNumber: 21\n                  }, this), STATUS_LIST.map((status, index) => /*#__PURE__*/_jsxDEV(MenuItem, {\n                    value: status.value,\n                    children: status.lable\n                  }, index, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 265,\n                    columnNumber: 23\n                  }, this))]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 249,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 247,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 246,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 207,\n            columnNumber: 13\n          }, this), loading ? /*#__PURE__*/_jsxDEV(Stack, {\n            mb: 2,\n            display: \"flex\",\n            alignItems: \"center\",\n            children: /*#__PURE__*/_jsxDEV(CircularProgress, {\n              color: \"primary\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 275,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 274,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(Scrollbar, {\n            children: /*#__PURE__*/_jsxDEV(TableContainer, {\n              children: /*#__PURE__*/_jsxDEV(Table, {\n                children: [/*#__PURE__*/_jsxDEV(TableHeadList, {\n                  headLabel: TABLE_HEAD,\n                  order: filters.order,\n                  orderBy: filters.orderBy,\n                  numSelected: selected.length,\n                  rowCount: categoryList.length,\n                  onRequestSort: onRequestSort,\n                  onSelectAllClick: handleSelectAllClick\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 281,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(TableBody, {\n                  children: categoryList.map(row => {\n                    const {\n                      _id,\n                      title,\n                      slug,\n                      status\n                    } = row;\n                    const isStatus = status === 'ACTIVE' ? 'success' : 'banned';\n                    const isItemSelected = selected.indexOf(_id) !== -1;\n                    return /*#__PURE__*/_jsxDEV(TableRow, {\n                      hover: true,\n                      tabIndex: -1,\n                      role: \"checkbox\",\n                      selected: isItemSelected,\n                      \"aria-checked\": isItemSelected,\n                      children: [/*#__PURE__*/_jsxDEV(TableCell, {\n                        padding: \"checkbox\",\n                        children: /*#__PURE__*/_jsxDEV(Checkbox, {\n                          checked: isItemSelected,\n                          onChange: event => handleClick(event, _id)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 305,\n                          columnNumber: 31\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 304,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                        align: \"left\",\n                        children: title\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 310,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                        align: \"left\",\n                        children: _id\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 311,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                        align: \"left\",\n                        children: slug\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 313,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                        align: \"left\",\n                        children: /*#__PURE__*/_jsxDEV(Label, {\n                          variant: \"ghost\",\n                          color: isStatus === 'banned' && 'error' || 'success',\n                          children: sentenceCase(status)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 315,\n                          columnNumber: 31\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 314,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                        align: \"left\",\n                        children: /*#__PURE__*/_jsxDEV(MoreMenu, {\n                          handleDelete: () => handleDelete(_id),\n                          handleEdit: () => history.push(`/dashboard/category/edit/${_id}`)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 323,\n                          columnNumber: 31\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 322,\n                        columnNumber: 29\n                      }, this)]\n                    }, _id, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 296,\n                      columnNumber: 27\n                    }, this);\n                  })\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 290,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 280,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 279,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 278,\n            columnNumber: 15\n          }, this), categoryList.length <= 0 && !loading && /*#__PURE__*/_jsxDEV(Box, {\n            textAlign: \"center\",\n            mt: 5,\n            children: [' ', /*#__PURE__*/_jsxDEV(Typography, {\n              children: \"Hi\\u1EC7n t\\u1EA1i ch\\u01B0a c\\xF3 danh m\\u1EE5c con n\\xE0o\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 339,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 337,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(TablePagination, {\n            component: \"div\",\n            count: count,\n            page: filters.page,\n            rowsPerPage: filters.limit,\n            rowsPerPageOptions: [5, 10, 15, 20, 25],\n            onPageChange: handleChangePage,\n            onRowsPerPageChange: handleChangeRowsPerPage\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 342,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Dialog, {\n      open: open,\n      onClose: () => setOpen(false),\n      \"aria-labelledby\": \"alert-dialog-title\",\n      \"aria-describedby\": \"alert-dialog-description\",\n      children: [/*#__PURE__*/_jsxDEV(DialogTitle, {\n        id: \"alert-dialog-title\",\n        children: \"X\\xF3a Danh M\\u1EE5c\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 360,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DialogContent, {\n        children: /*#__PURE__*/_jsxDEV(DialogContentText, {\n          id: \"alert-dialog-description\",\n          children: \"B\\u1EA1n c\\xF3 ch\\u0103c ch\\u1EAFn mu\\u1ED1n x\\xF3a danh m\\u1EE5c n\\xE0y kh\\xF4ng ?\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 362,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 361,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DialogActions, {\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          onClick: () => setOpen(false),\n          color: \"primary\",\n          children: \"H\\u1EE7y\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 367,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          onClick: () => onDeleteCategory(),\n          color: \"primary\",\n          autoFocus: true,\n          children: \"\\u0110\\u1ED3ng \\xFD\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 370,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 366,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 354,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(ListSubCategory, \"fceIfotcXrv9QnGBEwoDNviq7NI=\", false, function () {\n  return [useHistory];\n});\n\n_c = ListSubCategory;\n\nvar _c;\n\n$RefreshReg$(_c, \"ListSubCategory\");","map":{"version":3,"sources":["/home/haopc/Desktop/Workspace/hquiz.com/CMS/src/features/SubCategory/pages/List.js"],"names":["plusFill","Icon","Box","Button","Card","Checkbox","CircularProgress","Container","Dialog","DialogActions","DialogContent","DialogContentText","DialogTitle","FormControl","Grid","MenuItem","Select","Stack","Table","TableBody","TableCell","TableContainer","TablePagination","TableRow","Typography","InputLabel","TextField","Autocomplete","categoryApi","sentenceCase","ListToolbar","MoreMenu","TableHeadList","Label","Page","Scrollbar","STATUS_LIST","React","useCallback","useEffect","useState","Link","RouterLink","useHistory","toast","TABLE_HEAD","id","label","alignRight","ListSubCategory","history","loading","setLoading","loadingCategory","setLoadingCategory","count","setCount","open","setOpen","openSelect","setOpenSelect","categoryList","setCategoryList","idDelete","setIdDelete","list","setList","selected","setSelected","filters","setFilters","order","orderBy","page","limit","title_like","status","fetchSubCategoryList","res","getSubList","category","pagination","data","_total","error","console","log","fetchCategoryList","getList","handleSelectAllClick","event","target","checked","newSelecteds","map","_id","handleClick","name","selectedIndex","indexOf","newSelected","concat","slice","length","onRequestSort","property","isAsc","prev","handleChangePage","newPage","handleChangeRowsPerPage","parseInt","value","handleDelete","categoryId","onDeleteCategory","delete","success","response","handleFilterByName","search","handleChangSearchTopic","option","title","parentId","params","InputProps","endAdornment","index","lable","row","slug","isStatus","isItemSelected","push"],"mappings":"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","sourcesContent":["import plusFill from '@iconify/icons-eva/plus-fill';\nimport { Icon } from '@iconify/react';\nimport {\n  Box,\n  Button,\n  Card,\n  Checkbox,\n  CircularProgress,\n  Container,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  DialogTitle,\n  FormControl,\n  Grid,\n  MenuItem,\n  Select,\n  Stack,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TablePagination,\n  TableRow,\n  Typography,\n  InputLabel,\n  TextField,\n  Autocomplete\n} from '@material-ui/core';\nimport categoryApi from 'apis/categoryApi';\nimport { sentenceCase } from 'change-case';\nimport { ListToolbar, MoreMenu, TableHeadList } from 'components/common';\nimport Label from 'components/Label';\nimport Page from 'components/Page';\nimport Scrollbar from 'components/Scrollbar';\nimport { STATUS_LIST } from 'constants/index';\nimport React, { useCallback, useEffect, useState } from 'react';\nimport { Link as RouterLink, useHistory } from 'react-router-dom';\nimport { toast } from 'react-toastify';\n\nconst TABLE_HEAD = [\n  { id: 'title', label: 'Title', alignRight: false },\n  { id: 'id', label: 'Id', alignRight: false },\n  { id: 'slug', label: 'Slug', alignRight: false },\n  { id: 'status', label: 'Status', alignRight: false },\n  { id: '' }\n];\n\nexport const ListSubCategory = () => {\n  const history = useHistory();\n\n  const [loading, setLoading] = useState(false);\n  const [loadingCategory, setLoadingCategory] = useState(false);\n  const [count, setCount] = useState(20);\n  const [open, setOpen] = useState(false);\n  const [openSelect, setOpenSelect] = useState(false);\n  const [categoryList, setCategoryList] = useState([]);\n  const [idDelete, setIdDelete] = useState([]);\n  const [list, setList] = useState([]);\n  const [selected, setSelected] = useState([]);\n  const [filters, setFilters] = useState({\n    order: 'asc',\n    orderBy: 'title',\n    page: 0,\n    limit: 20,\n    title_like: '',\n    status: ''\n  });\n\n  const fetchSubCategoryList = useCallback(async (filters) => {\n    try {\n      setLoading(true);\n      const res = await categoryApi.getSubList({ ...filters, page: filters.page + 1 });\n      const { category, pagination } = res.data;\n      setCategoryList(category);\n      setCount(pagination._total);\n      setLoading(false);\n    } catch (error) {\n      console.log(error);\n      setLoading(false);\n      setCategoryList([]);\n    }\n  }, []);\n  const fetchCategoryList = async (filters) => {\n    try {\n      setLoadingCategory(true);\n      const res = await categoryApi.getList(filters);\n      const { categoryList } = res.data;\n      setList(categoryList);\n      setLoadingCategory(false);\n    } catch (error) {\n      setLoadingCategory(false);\n    }\n  };\n  useEffect(() => {\n    fetchSubCategoryList(filters);\n  }, [fetchSubCategoryList, filters]);\n\n  useEffect(() => {\n    if (!openSelect) {\n      setList([]);\n    }\n  }, [openSelect]);\n  // Function Table\n  const handleSelectAllClick = (event) => {\n    if (event.target.checked) {\n      const newSelecteds = categoryList.map((category) => category._id);\n      setSelected(newSelecteds);\n      return;\n    }\n    setSelected([]);\n  };\n  const handleClick = (event, name) => {\n    const selectedIndex = selected.indexOf(name);\n    let newSelected = [];\n    if (selectedIndex === -1) {\n      newSelected = newSelected.concat(selected, name);\n    } else if (selectedIndex === 0) {\n      newSelected = newSelected.concat(selected.slice(1));\n    } else if (selectedIndex === selected.length - 1) {\n      newSelected = newSelected.concat(selected.slice(0, -1));\n    } else if (selectedIndex > 0) {\n      newSelected = newSelected.concat(\n        selected.slice(0, selectedIndex),\n        selected.slice(selectedIndex + 1)\n      );\n    }\n    setSelected(newSelected);\n  };\n  const onRequestSort = (event, property) => {\n    const isAsc = property === filters.orderBy && filters.order === 'asc';\n    setFilters((prev) => ({\n      ...prev,\n      order: isAsc ? 'desc' : 'asc',\n      orderBy: property\n    }));\n  };\n  const handleChangePage = (event, newPage) => {\n    setFilters((prev) => ({\n      ...prev,\n      page: newPage\n    }));\n  };\n  const handleChangeRowsPerPage = (event) => {\n    setFilters((prev) => ({\n      ...prev,\n      limit: parseInt(event.target.value, 10),\n      page: 0\n    }));\n  };\n\n  // Handle Sub Category\n  const handleDelete = (categoryId) => {\n    setOpen(true);\n    if (typeof categoryId === 'string') {\n      setIdDelete([].concat(categoryId));\n      return;\n    }\n    setIdDelete(categoryId);\n  };\n  const onDeleteCategory = async () => {\n    try {\n      await categoryApi.delete(idDelete);\n      fetchSubCategoryList(filters);\n      toast.success('Xóa danh mục con thành công');\n    } catch (error) {\n      toast(error.response.data.error);\n    }\n    setOpen(false);\n    setSelected([]);\n  };\n  const handleFilterByName = (search) => {\n    setFilters((prev) => ({\n      ...prev,\n      title_like: search\n    }));\n  };\n\n  // Handle Sub Category\n  const handleChangSearchTopic = (search) => {\n    fetchCategoryList({ limit: 1000, title_like: search });\n  };\n  return (\n    <>\n      <Page title=\"Danh mục con | CMS\">\n        <Container maxWidth=\"2xl\">\n          <Stack direction=\"row\" alignItems=\"center\" justifyContent=\"space-between\" mb={5}>\n            <Typography variant=\"h4\" gutterBottom>\n              Danh mục con\n            </Typography>\n            <Button\n              variant=\"contained\"\n              component={RouterLink}\n              to=\"/dashboard/category/create\"\n              startIcon={<Icon icon={plusFill} />}\n            >\n              Tạo danh mục con\n            </Button>\n          </Stack>\n          <Card>\n            <ListToolbar\n              numSelected={selected.length}\n              onFilterName={handleFilterByName}\n              handleDelete={() => handleDelete(selected)}\n            />\n            <Grid container padding={1} pb={4} spacing={1}>\n              <Grid item xs={3}>\n                <Autocomplete\n                  // defaultValue=\"\"\n                  fullWidth\n                  open={openSelect}\n                  onOpen={() => setOpenSelect(true)}\n                  onClose={() => setOpenSelect(false)}\n                  id=\"category\"\n                  options={list}\n                  getOptionLabel={(option) => option.title}\n                  getOptionSelected={(option, value) => option.title === value.title}\n                  onInputChange={(event) => handleChangSearchTopic(event.target.value)}\n                  onChange={(event, value) =>\n                    setFilters((prev) => ({\n                      ...prev,\n                      parentId: value?._id || ''\n                    }))\n                  }\n                  renderInput={(params) => (\n                    <TextField\n                      {...params}\n                      label=\"Đề thi\"\n                      variant=\"outlined\"\n                      InputProps={{\n                        ...params.InputProps,\n                        endAdornment: (\n                          <>\n                            {loadingCategory ? (\n                              <CircularProgress color=\"inherit\" size={20} />\n                            ) : null}\n                            {params.InputProps.endAdornment}\n                          </>\n                        )\n                      }}\n                    />\n                  )}\n                />\n              </Grid>\n              <Grid item xs={2}>\n                <FormControl variant=\"outlined\" fullWidth>\n                  <InputLabel id=\"status\">Trạng thái</InputLabel>\n                  <Select\n                    defaultValue=\"\"\n                    labelId=\"status\"\n                    id=\"status\"\n                    label=\"Trạng thái\"\n                    onChange={(event) =>\n                      setFilters((prev) => ({\n                        ...prev,\n                        status: event.target.value\n                      }))\n                    }\n                  >\n                    <MenuItem value=\"\">\n                      <em>Tất cả</em>\n                    </MenuItem>\n                    {STATUS_LIST.map((status, index) => (\n                      <MenuItem value={status.value} key={index}>\n                        {status.lable}\n                      </MenuItem>\n                    ))}\n                  </Select>\n                </FormControl>\n              </Grid>\n            </Grid>\n            {loading ? (\n              <Stack mb={2} display=\"flex\" alignItems=\"center\">\n                <CircularProgress color=\"primary\" />\n              </Stack>\n            ) : (\n              <Scrollbar>\n                <TableContainer>\n                  <Table>\n                    <TableHeadList\n                      headLabel={TABLE_HEAD}\n                      order={filters.order}\n                      orderBy={filters.orderBy}\n                      numSelected={selected.length}\n                      rowCount={categoryList.length}\n                      onRequestSort={onRequestSort}\n                      onSelectAllClick={handleSelectAllClick}\n                    />\n                    <TableBody>\n                      {categoryList.map((row) => {\n                        const { _id, title, slug, status } = row;\n                        const isStatus = status === 'ACTIVE' ? 'success' : 'banned';\n                        const isItemSelected = selected.indexOf(_id) !== -1;\n                        return (\n                          <TableRow\n                            hover\n                            key={_id}\n                            tabIndex={-1}\n                            role=\"checkbox\"\n                            selected={isItemSelected}\n                            aria-checked={isItemSelected}\n                          >\n                            <TableCell padding=\"checkbox\">\n                              <Checkbox\n                                checked={isItemSelected}\n                                onChange={(event) => handleClick(event, _id)}\n                              ></Checkbox>\n                            </TableCell>\n                            <TableCell align=\"left\">{title}</TableCell>\n                            <TableCell align=\"left\">{_id}</TableCell>\n\n                            <TableCell align=\"left\">{slug}</TableCell>\n                            <TableCell align=\"left\">\n                              <Label\n                                variant=\"ghost\"\n                                color={(isStatus === 'banned' && 'error') || 'success'}\n                              >\n                                {sentenceCase(status)}\n                              </Label>\n                            </TableCell>\n                            <TableCell align=\"left\">\n                              <MoreMenu\n                                handleDelete={() => handleDelete(_id)}\n                                handleEdit={() => history.push(`/dashboard/category/edit/${_id}`)}\n                              />\n                            </TableCell>\n                          </TableRow>\n                        );\n                      })}\n                    </TableBody>\n                  </Table>\n                </TableContainer>\n              </Scrollbar>\n            )}\n            {categoryList.length <= 0 && !loading && (\n              <Box textAlign=\"center\" mt={5}>\n                {' '}\n                <Typography>Hiện tại chưa có danh mục con nào</Typography>\n              </Box>\n            )}\n            <TablePagination\n              component=\"div\"\n              count={count}\n              page={filters.page}\n              rowsPerPage={filters.limit}\n              rowsPerPageOptions={[5, 10, 15, 20, 25]}\n              onPageChange={handleChangePage}\n              onRowsPerPageChange={handleChangeRowsPerPage}\n            />\n          </Card>\n        </Container>\n      </Page>\n      <Dialog\n        open={open}\n        onClose={() => setOpen(false)}\n        aria-labelledby=\"alert-dialog-title\"\n        aria-describedby=\"alert-dialog-description\"\n      >\n        <DialogTitle id=\"alert-dialog-title\">Xóa Danh Mục</DialogTitle>\n        <DialogContent>\n          <DialogContentText id=\"alert-dialog-description\">\n            Bạn có chăc chắn muốn xóa danh mục này không ?\n          </DialogContentText>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={() => setOpen(false)} color=\"primary\">\n            Hủy\n          </Button>\n          <Button onClick={() => onDeleteCategory()} color=\"primary\" autoFocus>\n            Đồng ý\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}