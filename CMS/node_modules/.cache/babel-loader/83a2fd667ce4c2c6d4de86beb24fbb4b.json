{"ast":null,"code":"var _jsxFileName = \"/home/haopc/Desktop/Workspace/hquiz.com/CMS/src/features/History/pages/List.js\",\n    _s = $RefreshSig$();\n\nimport plusFill from '@iconify/icons-eva/plus-fill';\nimport { Icon } from '@iconify/react';\nimport { Button, Card, Checkbox, CircularProgress, Container, Dialog, DialogActions, DialogContent, DialogContentText, Stack, Table, TableBody, TableCell, TableContainer, TablePagination, TableRow, Typography, DialogTitle } from '@material-ui/core';\nimport historyApi from 'apis/historyApi';\nimport { ListToolbar, MoreMenu, TableHeadList } from 'components/common';\nimport Page from 'components/Page';\nimport Scrollbar from 'components/Scrollbar';\nimport React, { useCallback, useEffect, useState } from 'react';\nimport { Link as RouterLink, useHistory } from 'react-router-dom';\nimport { toast } from 'react-toastify';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst TABLE_HEAD = [{\n  id: 'id',\n  label: 'Id',\n  alignRight: false\n}, {\n  id: 'user',\n  label: 'User',\n  alignRight: false\n}, {\n  id: 'topic',\n  label: 'Topic',\n  alignRight: false\n}, {\n  id: 'score',\n  label: 'Score',\n  alignRight: false\n}, {\n  id: ''\n}];\nexport const ListHisroty = () => {\n  _s();\n\n  const history = useHistory();\n  const [open, setOpen] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [count, setCount] = useState(20);\n  const [idDeleted, setIdDeleted] = useState([]);\n  const [selected, setSelected] = useState([]);\n  const [historyList, setHistoryList] = useState([]);\n  const [filters, setFilters] = useState({\n    order: 'asc',\n    orderBy: 'title',\n    limit: 20,\n    page: 0\n  });\n  const fetchHistoryList = useCallback(async filters => {\n    try {\n      setLoading(true);\n      const res = await historyApi.getList({ ...filters,\n        page: filters.page + 1\n      });\n      const {\n        history,\n        pagination\n      } = res.data;\n      setHistoryList(history);\n      setCount(pagination._total);\n      setLoading(false);\n    } catch (error) {\n      setLoading(false);\n      toast(error.response.data.error);\n    }\n  }, []);\n  useEffect(() => {\n    fetchHistoryList(filters);\n  }, [fetchHistoryList, filters]); // Function Table\n\n  const handleSelectAllClick = event => {\n    if (event.target.checked) {\n      const newSelects = historyList.map(history => history._id);\n      setSelected(newSelects);\n      return;\n    }\n\n    setSelected([]);\n  };\n\n  const handleClick = (event, name) => {\n    const selectedIndex = selected.indexOf(name);\n    let newSelected = [];\n\n    if (selectedIndex === -1) {\n      newSelected = newSelected.concat(selected, name);\n    } else if (selectedIndex === 0) {\n      newSelected = newSelected.concat(selected.slice(1));\n    } else if (selectedIndex === selected.length - 1) {\n      newSelected = newSelected.concat(selected.slice(0, -1));\n    } else if (selectedIndex > 0) {\n      newSelected = newSelected.concat(selected.slice(0, selectedIndex), selected.slice(selectedIndex + 1));\n    }\n\n    setSelected(newSelected);\n  };\n\n  const handleRequestSort = (event, property) => {\n    const isAsc = property === filters.orderBy && filters.order === 'asc';\n    setFilters(prev => ({ ...prev,\n      order: isAsc ? 'dsec' : 'asc',\n      orderBy: property\n    }));\n  };\n\n  const handleChangePage = (event, newPage) => {\n    setFilters(prev => ({ ...prev,\n      page: newPage\n    }));\n  };\n\n  const handleChangeRowsPerPage = event => {\n    setFilters(prev => ({ ...prev,\n      limit: parseInt(event.target.value, 10),\n      page: 0\n    }));\n  }; // Handle History\n\n\n  const handleDelete = id => {\n    setOpen(true);\n    setIdDeleted(idDeleted.concat(id));\n  };\n\n  const onDeleteCategory = async () => {\n    try {\n      await historyApi.delete(idDeleted);\n      fetchHistoryList(filters);\n      setSelected([]);\n      toast.success('Xóa lịch sử thành công');\n    } catch (error) {\n      toast.error(error.response.data.error);\n    }\n\n    setOpen(false);\n  };\n\n  const handleFilterByName = () => {};\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Page, {\n      children: /*#__PURE__*/_jsxDEV(Container, {\n        maxWidth: \"2xl\",\n        children: [/*#__PURE__*/_jsxDEV(Stack, {\n          direction: \"row\",\n          alignItems: \"center\",\n          justifyContent: \"space-between\",\n          mb: 5,\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"h4\",\n            gutterBottom: true,\n            children: \"L\\u1ECBch s\\u1EED\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"contained\",\n            component: RouterLink,\n            to: \"/dashboard/category/create\",\n            startIcon: /*#__PURE__*/_jsxDEV(Icon, {\n              icon: plusFill\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 149,\n              columnNumber: 26\n            }, this),\n            children: \"T\\u1EA1o l\\u1ECBch s\\u1EED\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 145,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Card, {\n          children: [/*#__PURE__*/_jsxDEV(ListToolbar, {\n            numSelected: selected.length,\n            handleDelete: () => handleDelete(selected),\n            onFilterName: handleFilterByName\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 155,\n            columnNumber: 13\n          }, this), loading ? /*#__PURE__*/_jsxDEV(Stack, {\n            mb: 2,\n            display: \"flex\",\n            alignItems: \"center\",\n            children: /*#__PURE__*/_jsxDEV(CircularProgress, {\n              color: \"primary\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 162,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 161,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(Scrollbar, {\n              children: /*#__PURE__*/_jsxDEV(TableContainer, {\n                children: /*#__PURE__*/_jsxDEV(Table, {\n                  children: [/*#__PURE__*/_jsxDEV(TableHeadList, {\n                    headLabel: TABLE_HEAD,\n                    order: filters.order,\n                    orderBy: filters.orderBy,\n                    numSelected: selected.length,\n                    rowCount: historyList.length,\n                    onSelectAllClick: handleSelectAllClick,\n                    onRequestSort: handleRequestSort\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 169,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(TableBody, {\n                    children: historyList.map(row => {\n                      const {\n                        user,\n                        topic,\n                        score,\n                        _id\n                      } = row;\n                      const isItemSelected = selected.indexOf(_id) !== -1;\n                      return /*#__PURE__*/_jsxDEV(TableRow, {\n                        hover: true,\n                        tabIndex: -1,\n                        role: \"checkbox\",\n                        selected: isItemSelected,\n                        \"aria-checked\": isItemSelected,\n                        children: [/*#__PURE__*/_jsxDEV(TableCell, {\n                          padding: \"checkbox\",\n                          children: /*#__PURE__*/_jsxDEV(Checkbox, {\n                            checked: isItemSelected,\n                            onChange: event => handleClick(event, _id)\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 192,\n                            columnNumber: 33\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 191,\n                          columnNumber: 31\n                        }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                          align: \"left\",\n                          children: _id\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 197,\n                          columnNumber: 31\n                        }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                          align: \"left\",\n                          children: user\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 198,\n                          columnNumber: 31\n                        }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                          align: \"left\",\n                          children: topic\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 199,\n                          columnNumber: 31\n                        }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                          align: \"left\",\n                          children: score\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 200,\n                          columnNumber: 31\n                        }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                          align: \"left\",\n                          children: /*#__PURE__*/_jsxDEV(MoreMenu, {\n                            handleDelete: () => handleDelete(_id),\n                            handleEdit: () => history.push('/')\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 202,\n                            columnNumber: 33\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 201,\n                          columnNumber: 31\n                        }, this)]\n                      }, _id, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 183,\n                        columnNumber: 29\n                      }, this);\n                    })\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 178,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 168,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 167,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 166,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(TablePagination, {\n              count: count,\n              page: filters.page,\n              rowsPerPage: filters.limit,\n              rowsPerPageOptions: [5, 10, 15, 20],\n              onPageChange: handleChangePage,\n              onRowsPerPageChange: handleChangeRowsPerPage,\n              component: \"div\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 214,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Dialog, {\n      open: open,\n      onClose: () => setOpen(false),\n      \"aria-labelledby\": \"alert-dialog-title\",\n      \"aria-describedby\": \"alert-dialog-description\",\n      children: [/*#__PURE__*/_jsxDEV(DialogTitle, {\n        id: \"alert-dialog-title\",\n        children: \"X\\xF3a Danh M\\u1EE5c\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DialogContent, {\n        children: /*#__PURE__*/_jsxDEV(DialogContentText, {\n          id: \"alert-dialog-description\",\n          children: \"B\\u1EA1n c\\xF3 ch\\u0103c ch\\u1EAFn mu\\u1ED1n x\\xF3a danh m\\u1EE5c n\\xE0y kh\\xF4ng ?\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DialogActions, {\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          onClick: () => setOpen(false),\n          color: \"primary\",\n          children: \"H\\u1EE7y\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 241,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          onClick: () => onDeleteCategory(),\n          color: \"primary\",\n          autoFocus: true,\n          children: \"\\u0110\\u1ED3ng \\xFD\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 244,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(ListHisroty, \"gIN+PZpc3GjAb2im8stbUsjOkjI=\", false, function () {\n  return [useHistory];\n});\n\n_c = ListHisroty;\n\nvar _c;\n\n$RefreshReg$(_c, \"ListHisroty\");","map":{"version":3,"sources":["/home/haopc/Desktop/Workspace/hquiz.com/CMS/src/features/History/pages/List.js"],"names":["plusFill","Icon","Button","Card","Checkbox","CircularProgress","Container","Dialog","DialogActions","DialogContent","DialogContentText","Stack","Table","TableBody","TableCell","TableContainer","TablePagination","TableRow","Typography","DialogTitle","historyApi","ListToolbar","MoreMenu","TableHeadList","Page","Scrollbar","React","useCallback","useEffect","useState","Link","RouterLink","useHistory","toast","TABLE_HEAD","id","label","alignRight","ListHisroty","history","open","setOpen","loading","setLoading","count","setCount","idDeleted","setIdDeleted","selected","setSelected","historyList","setHistoryList","filters","setFilters","order","orderBy","limit","page","fetchHistoryList","res","getList","pagination","data","_total","error","response","handleSelectAllClick","event","target","checked","newSelects","map","_id","handleClick","name","selectedIndex","indexOf","newSelected","concat","slice","length","handleRequestSort","property","isAsc","prev","handleChangePage","newPage","handleChangeRowsPerPage","parseInt","value","handleDelete","onDeleteCategory","delete","success","handleFilterByName","row","user","topic","score","isItemSelected","push"],"mappings":"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","sourcesContent":["import plusFill from '@iconify/icons-eva/plus-fill';\nimport { Icon } from '@iconify/react';\nimport {\n  Button,\n  Card,\n  Checkbox,\n  CircularProgress,\n  Container,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  Stack,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TablePagination,\n  TableRow,\n  Typography,\n  DialogTitle\n} from '@material-ui/core';\nimport historyApi from 'apis/historyApi';\nimport { ListToolbar, MoreMenu, TableHeadList } from 'components/common';\nimport Page from 'components/Page';\nimport Scrollbar from 'components/Scrollbar';\nimport React, { useCallback, useEffect, useState } from 'react';\nimport { Link as RouterLink, useHistory } from 'react-router-dom';\nimport { toast } from 'react-toastify';\n\nconst TABLE_HEAD = [\n  { id: 'id', label: 'Id', alignRight: false },\n  { id: 'user', label: 'User', alignRight: false },\n  { id: 'topic', label: 'Topic', alignRight: false },\n  { id: 'score', label: 'Score', alignRight: false },\n  { id: '' }\n];\n\nexport const ListHisroty = () => {\n  const history = useHistory();\n  const [open, setOpen] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [count, setCount] = useState(20);\n  const [idDeleted, setIdDeleted] = useState([]);\n  const [selected, setSelected] = useState([]);\n  const [historyList, setHistoryList] = useState([]);\n  const [filters, setFilters] = useState({\n    order: 'asc',\n    orderBy: 'title',\n    limit: 20,\n    page: 0\n  });\n\n  const fetchHistoryList = useCallback(async (filters) => {\n    try {\n      setLoading(true);\n      const res = await historyApi.getList({ ...filters, page: filters.page + 1 });\n      const { history, pagination } = res.data;\n      setHistoryList(history);\n      setCount(pagination._total);\n      setLoading(false);\n    } catch (error) {\n      setLoading(false);\n      toast(error.response.data.error);\n    }\n  }, []);\n\n  useEffect(() => {\n    fetchHistoryList(filters);\n  }, [fetchHistoryList, filters]);\n\n  // Function Table\n  const handleSelectAllClick = (event) => {\n    if (event.target.checked) {\n      const newSelects = historyList.map((history) => history._id);\n      setSelected(newSelects);\n      return;\n    }\n    setSelected([]);\n  };\n  const handleClick = (event, name) => {\n    const selectedIndex = selected.indexOf(name);\n    let newSelected = [];\n    if (selectedIndex === -1) {\n      newSelected = newSelected.concat(selected, name);\n    } else if (selectedIndex === 0) {\n      newSelected = newSelected.concat(selected.slice(1));\n    } else if (selectedIndex === selected.length - 1) {\n      newSelected = newSelected.concat(selected.slice(0, -1));\n    } else if (selectedIndex > 0) {\n      newSelected = newSelected.concat(\n        selected.slice(0, selectedIndex),\n        selected.slice(selectedIndex + 1)\n      );\n    }\n    setSelected(newSelected);\n  };\n  const handleRequestSort = (event, property) => {\n    const isAsc = property === filters.orderBy && filters.order === 'asc';\n    setFilters((prev) => ({\n      ...prev,\n      order: isAsc ? 'dsec' : 'asc',\n      orderBy: property\n    }));\n  };\n  const handleChangePage = (event, newPage) => {\n    setFilters((prev) => ({\n      ...prev,\n      page: newPage\n    }));\n  };\n  const handleChangeRowsPerPage = (event) => {\n    setFilters((prev) => ({\n      ...prev,\n      limit: parseInt(event.target.value, 10),\n      page: 0\n    }));\n  };\n\n  // Handle History\n  const handleDelete = (id) => {\n    setOpen(true);\n    setIdDeleted(idDeleted.concat(id));\n  };\n  const onDeleteCategory = async () => {\n    try {\n      await historyApi.delete(idDeleted);\n      fetchHistoryList(filters);\n      setSelected([]);\n      toast.success('Xóa lịch sử thành công');\n    } catch (error) {\n      toast.error(error.response.data.error);\n    }\n    setOpen(false);\n  };\n  const handleFilterByName = () => {};\n  return (\n    <>\n      <Page>\n        <Container maxWidth=\"2xl\">\n          <Stack direction=\"row\" alignItems=\"center\" justifyContent=\"space-between\" mb={5}>\n            <Typography variant=\"h4\" gutterBottom>\n              Lịch sử\n            </Typography>\n            <Button\n              variant=\"contained\"\n              component={RouterLink}\n              to=\"/dashboard/category/create\"\n              startIcon={<Icon icon={plusFill} />}\n            >\n              Tạo lịch sử\n            </Button>\n          </Stack>\n          <Card>\n            <ListToolbar\n              numSelected={selected.length}\n              handleDelete={() => handleDelete(selected)}\n              onFilterName={handleFilterByName}\n            />\n            {loading ? (\n              <Stack mb={2} display=\"flex\" alignItems=\"center\">\n                <CircularProgress color=\"primary\" />\n              </Stack>\n            ) : (\n              <>\n                <Scrollbar>\n                  <TableContainer>\n                    <Table>\n                      <TableHeadList\n                        headLabel={TABLE_HEAD}\n                        order={filters.order}\n                        orderBy={filters.orderBy}\n                        numSelected={selected.length}\n                        rowCount={historyList.length}\n                        onSelectAllClick={handleSelectAllClick}\n                        onRequestSort={handleRequestSort}\n                      />\n                      <TableBody>\n                        {historyList.map((row) => {\n                          const { user, topic, score, _id } = row;\n                          const isItemSelected = selected.indexOf(_id) !== -1;\n                          return (\n                            <TableRow\n                              hover\n                              key={_id}\n                              tabIndex={-1}\n                              role=\"checkbox\"\n                              selected={isItemSelected}\n                              aria-checked={isItemSelected}\n                            >\n                              <TableCell padding=\"checkbox\">\n                                <Checkbox\n                                  checked={isItemSelected}\n                                  onChange={(event) => handleClick(event, _id)}\n                                ></Checkbox>\n                              </TableCell>\n                              <TableCell align=\"left\">{_id}</TableCell>\n                              <TableCell align=\"left\">{user}</TableCell>\n                              <TableCell align=\"left\">{topic}</TableCell>\n                              <TableCell align=\"left\">{score}</TableCell>\n                              <TableCell align=\"left\">\n                                <MoreMenu\n                                  handleDelete={() => handleDelete(_id)}\n                                  handleEdit={() => history.push('/')}\n                                />\n                              </TableCell>\n                            </TableRow>\n                          );\n                        })}\n                      </TableBody>\n                    </Table>\n                  </TableContainer>\n                </Scrollbar>\n                <TablePagination\n                  count={count}\n                  page={filters.page}\n                  rowsPerPage={filters.limit}\n                  rowsPerPageOptions={[5, 10, 15, 20]}\n                  onPageChange={handleChangePage}\n                  onRowsPerPageChange={handleChangeRowsPerPage}\n                  component=\"div\"\n                />\n              </>\n            )}\n          </Card>\n        </Container>\n      </Page>\n      <Dialog\n        open={open}\n        onClose={() => setOpen(false)}\n        aria-labelledby=\"alert-dialog-title\"\n        aria-describedby=\"alert-dialog-description\"\n      >\n        <DialogTitle id=\"alert-dialog-title\">Xóa Danh Mục</DialogTitle>\n        <DialogContent>\n          <DialogContentText id=\"alert-dialog-description\">\n            Bạn có chăc chắn muốn xóa danh mục này không ?\n          </DialogContentText>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={() => setOpen(false)} color=\"primary\">\n            Hủy\n          </Button>\n          <Button onClick={() => onDeleteCategory()} color=\"primary\" autoFocus>\n            Đồng ý\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}