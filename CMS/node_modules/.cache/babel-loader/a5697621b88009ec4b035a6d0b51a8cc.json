{"ast":null,"code":"var _jsxFileName = \"/home/haopc/Desktop/Workspace/hquiz.com/CMS/src/layouts/dashboard/index.js\",\n    _s = $RefreshSig$();\n\n// material\nimport { styled } from '@material-ui/core/styles';\nimport axios from 'axios';\nimport { useEffect, useRef, useState } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { Switch, useHistory } from 'react-router-dom';\nimport { logout } from 'features/Auth/authSlice';\nimport routes from 'routes';\nimport PrivateRouter from 'routes/PrivateRouter';\nimport DashboardNavbar from './DashboardNavbar';\nimport DashboardSidebar from './DashboardSidebar'; // ----------------------------------------------------------------------\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst APP_BAR_MOBILE = 64;\nconst APP_BAR_DESKTOP = 92;\nconst RootStyle = styled('div')({\n  display: 'flex',\n  minHeight: '100%',\n  overflow: 'hidden'\n});\nconst MainStyle = styled('div')(({\n  theme\n}) => ({\n  flexGrow: 1,\n  overflow: 'auto',\n  minHeight: '100%',\n  paddingTop: APP_BAR_MOBILE + 24,\n  paddingBottom: theme.spacing(10),\n  [theme.breakpoints.up('lg')]: {\n    paddingTop: APP_BAR_DESKTOP + 24,\n    paddingLeft: theme.spacing(2),\n    paddingRight: theme.spacing(2)\n  }\n})); // ----------------------------------------------------------------------\n\nexport default function DashboardLayout() {\n  _s();\n\n  const dispatch = useDispatch();\n  const [open, setOpen] = useState(false);\n  const history = useHistory();\n  const currentRef = useRef(null);\n  useEffect(() => {\n    const token = JSON.parse(localStorage.getItem('refreshToken'));\n\n    if (token) {\n      currentRef.current = setInterval(async () => {\n        try {\n          const token = JSON.parse(localStorage.getItem('refreshToken'));\n          const res = await axios.post(`http://localhost:5000/api/auth/refresh-token`, {\n            token\n          });\n          console.log(res.token);\n          localStorage.setItem('token', JSON.stringify(res.token));\n        } catch (error) {\n          const action = logout();\n          dispatch(action);\n        }\n      }, 80000 * 1000);\n    }\n\n    return () => {\n      clearInterval(currentRef.current);\n    };\n  }, [history, dispatch]);\n  return /*#__PURE__*/_jsxDEV(RootStyle, {\n    children: [/*#__PURE__*/_jsxDEV(DashboardNavbar, {\n      onOpenSidebar: () => setOpen(true)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(DashboardSidebar, {\n      isOpenSidebar: open,\n      onCloseSidebar: () => setOpen(false)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(MainStyle, {\n      children: /*#__PURE__*/_jsxDEV(Switch, {\n        children: routes.map((route, index) => /*#__PURE__*/_jsxDEV(PrivateRouter, {\n          exact: true,\n          path: route.path,\n          component: route.component\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 5\n  }, this);\n}\n\n_s(DashboardLayout, \"8/IVfVLRCZImUc53zbQ0zJ3fTCU=\", false, function () {\n  return [useDispatch, useHistory];\n});\n\n_c = DashboardLayout;\n\nvar _c;\n\n$RefreshReg$(_c, \"DashboardLayout\");","map":{"version":3,"sources":["/home/haopc/Desktop/Workspace/hquiz.com/CMS/src/layouts/dashboard/index.js"],"names":["styled","axios","useEffect","useRef","useState","useDispatch","Switch","useHistory","logout","routes","PrivateRouter","DashboardNavbar","DashboardSidebar","APP_BAR_MOBILE","APP_BAR_DESKTOP","RootStyle","display","minHeight","overflow","MainStyle","theme","flexGrow","paddingTop","paddingBottom","spacing","breakpoints","up","paddingLeft","paddingRight","DashboardLayout","dispatch","open","setOpen","history","currentRef","token","JSON","parse","localStorage","getItem","current","setInterval","res","post","console","log","setItem","stringify","error","action","clearInterval","map","route","index","path","component"],"mappings":"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","sourcesContent":["// material\nimport { styled } from '@material-ui/core/styles';\nimport axios from 'axios';\nimport { useEffect, useRef, useState } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { Switch, useHistory } from 'react-router-dom';\nimport { logout } from 'features/Auth/authSlice';\nimport routes from 'routes';\nimport PrivateRouter from 'routes/PrivateRouter';\nimport DashboardNavbar from './DashboardNavbar';\nimport DashboardSidebar from './DashboardSidebar';\n// ----------------------------------------------------------------------\n\nconst APP_BAR_MOBILE = 64;\nconst APP_BAR_DESKTOP = 92;\n\nconst RootStyle = styled('div')({\n  display: 'flex',\n  minHeight: '100%',\n  overflow: 'hidden'\n});\n\nconst MainStyle = styled('div')(({ theme }) => ({\n  flexGrow: 1,\n  overflow: 'auto',\n  minHeight: '100%',\n  paddingTop: APP_BAR_MOBILE + 24,\n  paddingBottom: theme.spacing(10),\n  [theme.breakpoints.up('lg')]: {\n    paddingTop: APP_BAR_DESKTOP + 24,\n    paddingLeft: theme.spacing(2),\n    paddingRight: theme.spacing(2)\n  }\n}));\n\n// ----------------------------------------------------------------------\n\nexport default function DashboardLayout() {\n  const dispatch = useDispatch();\n  const [open, setOpen] = useState(false);\n  const history = useHistory();\n  const currentRef = useRef(null);\n\n  useEffect(() => {\n    const token = JSON.parse(localStorage.getItem('refreshToken'));\n    if (token) {\n      currentRef.current = setInterval(async () => {\n        try {\n          const token = JSON.parse(localStorage.getItem('refreshToken'));\n          const res = await axios.post(`http://localhost:5000/api/auth/refresh-token`, {\n            token\n          });\n          console.log(res.token);\n          localStorage.setItem('token', JSON.stringify(res.token));\n        } catch (error) {\n          const action = logout();\n          dispatch(action);\n        }\n      }, 80000 * 1000);\n    }\n    return () => {\n      clearInterval(currentRef.current);\n    };\n  }, [history, dispatch]);\n  return (\n    <RootStyle>\n      <DashboardNavbar onOpenSidebar={() => setOpen(true)} />\n      <DashboardSidebar isOpenSidebar={open} onCloseSidebar={() => setOpen(false)} />\n      <MainStyle>\n        <Switch>\n          {routes.map((route, index) => (\n            <PrivateRouter key={index} exact path={route.path} component={route.component} />\n          ))}\n        </Switch>\n      </MainStyle>\n    </RootStyle>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}