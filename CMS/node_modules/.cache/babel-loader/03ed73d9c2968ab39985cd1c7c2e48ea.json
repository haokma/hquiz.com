{"ast":null,"code":"var _jsxFileName = \"/home/haopc/Desktop/Workspace/hquiz.com/CMS/src/features/Question/pages/List.js\",\n    _s = $RefreshSig$();\n\nimport plusFill from '@iconify/icons-eva/plus-fill';\nimport { Icon } from '@iconify/react';\nimport { Autocomplete, Button, Card, Checkbox, CircularProgress, Container, Dialog, DialogActions, DialogContent, DialogContentText, DialogTitle, FormControl, Grid, InputLabel, MenuItem, Select, Stack, Table, TableBody, TableCell, TableContainer, TablePagination, TableRow, TextField, Typography } from '@material-ui/core';\nimport { Box } from '@material-ui/system';\nimport questionApi from 'apis/questionApi';\nimport topicApi from 'apis/topicApi';\nimport { sentenceCase } from 'change-case';\nimport { ListToolbar, MoreMenu, TableHeadList } from 'components/common';\nimport Label from 'components/Label';\nimport Page from 'components/Page';\nimport Scrollbar from 'components/Scrollbar';\nimport { STATUS_LIST } from 'constants/index';\nimport React, { useCallback, useEffect, useState } from 'react';\nimport { Link as RouterLink, useHistory } from 'react-router-dom';\nimport { toast } from 'react-toastify';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst TABLE_HEAD = [{\n  id: 'title',\n  label: 'Title',\n  alignRight: false\n}, {\n  id: 'id',\n  label: 'Id',\n  alignRight: false\n}, {\n  id: 'topic',\n  label: 'Topic',\n  alignRight: false\n}, {\n  id: 'status',\n  label: 'Status',\n  alignRight: false\n}, {\n  id: ''\n}];\nexport const ListQuestion = () => {\n  _s();\n\n  const history = useHistory();\n  const [open, setOpen] = useState(false);\n  const [openSelect, setOpenSelect] = useState(false);\n  const [idDelete, setIdDelete] = useState('');\n  const [selected, setSelected] = useState([]);\n  const [count, setCount] = useState(20);\n  const [loading, setLoading] = useState(false);\n  const [loadingTopic, setLoadingTopic] = useState(false);\n  const [questionList, setQuestionList] = useState([]);\n  const [topicList, setTopicList] = useState([]);\n  const [filters, setFilters] = useState({\n    order: 'asc',\n    orderBy: 'title',\n    page: 0,\n    limit: 20,\n    title_like: '',\n    topic: '',\n    status: ''\n  });\n  const fetchListQuestion = useCallback(async filters => {\n    try {\n      setLoading(true);\n      const res = await questionApi.getList({ ...filters,\n        page: filters.page + 1\n      });\n      const {\n        pagination,\n        questionList\n      } = res.data;\n      console.log({\n        pagination,\n        questionList\n      });\n      setQuestionList(questionList);\n      setCount(pagination._total);\n      setLoading(false);\n    } catch (error) {\n      setLoading(false);\n      setQuestionList([]);\n    }\n  }, []);\n\n  const fetchTopicList = async filters => {\n    try {\n      setLoadingTopic(true);\n      const res = await topicApi.getList(filters);\n      const {\n        topic\n      } = res.data;\n      setLoadingTopic(false);\n      setTopicList(topic);\n    } catch (error) {\n      setLoadingTopic(false);\n      toast.error(error.response.data.error);\n    }\n  };\n\n  useEffect(() => {\n    fetchListQuestion(filters);\n  }, [filters, fetchListQuestion]);\n  useEffect(() => {\n    if (!openSelect) {\n      setTopicList([]);\n    }\n  }, [openSelect]); // Function Table\n\n  const handleRequestSort = (event, property) => {\n    const isAsc = filters.orderBy === property && filters.order === 'asc';\n    setFilters(prev => ({ ...prev,\n      order: isAsc ? 'desc' : 'asc',\n      orderBy: property\n    }));\n  };\n\n  const handleSelectAllClick = event => {\n    if (event.target.checked) {\n      const newSelecteds = questionList.map(n => n._id);\n      setSelected(newSelecteds);\n      return;\n    }\n\n    setSelected([]);\n  };\n\n  const handleClick = (event, name) => {\n    const selectedIndex = selected.indexOf(name);\n    let newSelected = [];\n\n    if (selectedIndex === -1) {\n      newSelected = newSelected.concat(selected, name);\n    } else if (selectedIndex === 0) {\n      newSelected = newSelected.concat(selected.slice(1));\n    } else if (selectedIndex === selected.length - 1) {\n      newSelected = newSelected.concat(selected.slice(0, -1));\n    } else if (selectedIndex > 0) {\n      newSelected = newSelected.concat(selected.slice(0, selectedIndex), selected.slice(selectedIndex + 1));\n    }\n\n    setSelected(newSelected);\n  };\n\n  const handleChangePage = (event, newPage) => {\n    setFilters(prev => ({ ...prev,\n      page: newPage\n    }));\n  };\n\n  const handleChangeRowsPerPage = event => {\n    setFilters(prev => ({ ...prev,\n      limit: parseInt(event.target.value, 10),\n      page: 0\n    }));\n  }; // Handle Question\n\n\n  const handleDelete = categoryId => {\n    setOpen(true);\n\n    if (typeof categoryId === 'string') {\n      setIdDelete([].concat(categoryId));\n      return;\n    }\n\n    setIdDelete(categoryId);\n  };\n\n  const onDeleteQuestion = async () => {\n    try {\n      await questionApi.delete(idDelete);\n      toast.success('Xóa câu hỏi thành công');\n      fetchListQuestion(filters);\n      setOpen(false);\n      setSelected([]);\n      setFilters(prev => ({ ...prev,\n        page: 0\n      }));\n    } catch (error) {\n      toast.error(error.respose.data.error);\n      setOpen(false);\n    }\n  };\n\n  const handleFilterByName = search => {\n    setFilters(prev => ({ ...prev,\n      title_like: search,\n      page: 0\n    }));\n  }; // Handle Topic\n\n\n  const handleChangSearchTopic = search => {\n    fetchTopicList({\n      limit: 1000,\n      title_like: search\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Page, {\n      title: \"C\\xE2u h\\u1ECFi | CMS\",\n      children: /*#__PURE__*/_jsxDEV(Container, {\n        maxWidth: \"2xl\",\n        children: [/*#__PURE__*/_jsxDEV(Stack, {\n          direction: \"row\",\n          alignItems: \"center\",\n          justifyContent: \"space-between\",\n          mb: 5,\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"h4\",\n            gutterBottom: true,\n            children: \"Danh s\\xE1ch c\\xE2u h\\u1ECFi\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"contained\",\n            component: RouterLink,\n            to: \"/dashboard/question/create\",\n            startIcon: /*#__PURE__*/_jsxDEV(Icon, {\n              icon: plusFill\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 201,\n              columnNumber: 26\n            }, this),\n            children: \"T\\u1EA1o c\\xE2u h\\u1ECFi\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 197,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Card, {\n          children: [/*#__PURE__*/_jsxDEV(ListToolbar, {\n            numSelected: selected.length,\n            onFilterName: handleFilterByName,\n            handleDelete: () => handleDelete(selected)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 207,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            container: true,\n            padding: 1,\n            pb: 4,\n            spacing: 1,\n            children: [/*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 3,\n              children: /*#__PURE__*/_jsxDEV(Autocomplete, {\n                fullWidth: true,\n                open: openSelect,\n                onOpen: () => setOpenSelect(true),\n                onClose: () => setOpenSelect(false),\n                id: \"topic\",\n                options: topicList,\n                getOptionLabel: option => option.name,\n                getOptionSelected: (option, value) => option.name === value.name,\n                onInputChange: event => handleChangSearchTopic(event.target.value),\n                onChange: (event, value) => setFilters(prev => ({ ...prev,\n                  topic: (value === null || value === void 0 ? void 0 : value._id) || ''\n                })),\n                renderInput: params => /*#__PURE__*/_jsxDEV(TextField, { ...params,\n                  label: \"\\u0110\\u1EC1 thi\",\n                  variant: \"outlined\",\n                  InputProps: { ...params.InputProps,\n                    endAdornment: /*#__PURE__*/_jsxDEV(_Fragment, {\n                      children: [loadingTopic ? /*#__PURE__*/_jsxDEV(CircularProgress, {\n                        color: \"inherit\",\n                        size: 20\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 239,\n                        columnNumber: 45\n                      }, this) : null, params.InputProps.endAdornment]\n                    }, void 0, true)\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 231,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 214,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 213,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Grid, {\n              item: true,\n              xs: 2,\n              children: /*#__PURE__*/_jsxDEV(FormControl, {\n                variant: \"outlined\",\n                fullWidth: true,\n                children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n                  id: \"status\",\n                  children: \"Tr\\u1EA1ng th\\xE1i\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 250,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Select, {\n                  defaultValue: \"\",\n                  labelId: \"status\",\n                  id: \"status\",\n                  label: \"Tr\\u1EA1ng th\\xE1i\",\n                  onChange: event => setFilters(prev => ({ ...prev,\n                    status: event.target.value\n                  })),\n                  children: [/*#__PURE__*/_jsxDEV(MenuItem, {\n                    value: \"\",\n                    children: /*#__PURE__*/_jsxDEV(\"em\", {\n                      children: \"T\\u1EA5t c\\u1EA3\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 264,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 263,\n                    columnNumber: 21\n                  }, this), STATUS_LIST.map((status, index) => /*#__PURE__*/_jsxDEV(MenuItem, {\n                    value: status.value,\n                    children: status.lable\n                  }, index, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 267,\n                    columnNumber: 23\n                  }, this))]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 251,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 249,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 248,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 212,\n            columnNumber: 13\n          }, this), loading ? /*#__PURE__*/_jsxDEV(Stack, {\n            mb: 2,\n            display: \"flex\",\n            alignItems: \"center\",\n            children: /*#__PURE__*/_jsxDEV(CircularProgress, {\n              color: \"primary\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 277,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 276,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(Scrollbar, {\n              children: /*#__PURE__*/_jsxDEV(TableContainer, {\n                sx: {\n                  minWidth: 800\n                },\n                children: /*#__PURE__*/_jsxDEV(Table, {\n                  children: [/*#__PURE__*/_jsxDEV(TableHeadList, {\n                    headLabel: TABLE_HEAD,\n                    order: filters.order,\n                    orderBy: filters.orderBy,\n                    numSelected: selected.length,\n                    onRequestSort: handleRequestSort,\n                    onSelectAllClick: handleSelectAllClick,\n                    rowCount: questionList.length\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 284,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(TableBody, {\n                    children: questionList.map(row => {\n                      const {\n                        _id,\n                        title,\n                        topic,\n                        status\n                      } = row;\n                      const isItemSelected = selected.indexOf(_id) !== -1;\n                      const isStatus = status === 'ACTIVE' ? 'success' : 'banned';\n                      return /*#__PURE__*/_jsxDEV(TableRow, {\n                        hover: true,\n                        tabIndex: -1,\n                        role: \"checkbox\",\n                        selected: isItemSelected,\n                        \"aria-checked\": isItemSelected,\n                        children: [/*#__PURE__*/_jsxDEV(TableCell, {\n                          padding: \"checkbox\",\n                          children: /*#__PURE__*/_jsxDEV(Checkbox, {\n                            checked: isItemSelected,\n                            onChange: event => handleClick(event, _id)\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 308,\n                            columnNumber: 33\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 307,\n                          columnNumber: 31\n                        }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                          align: \"left\",\n                          children: title\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 313,\n                          columnNumber: 31\n                        }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                          align: \"left\",\n                          children: _id\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 314,\n                          columnNumber: 31\n                        }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                          align: \"left\",\n                          children: topic\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 315,\n                          columnNumber: 31\n                        }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                          align: \"left\",\n                          children: /*#__PURE__*/_jsxDEV(Label, {\n                            variant: \"ghost\",\n                            color: isStatus === 'banned' && 'error' || 'success',\n                            children: sentenceCase(status)\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 317,\n                            columnNumber: 33\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 316,\n                          columnNumber: 31\n                        }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                          align: \"left\",\n                          children: /*#__PURE__*/_jsxDEV(MoreMenu, {\n                            handleDelete: () => handleDelete(_id),\n                            handleEdit: () => history.push('/dashboard/topic')\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 325,\n                            columnNumber: 33\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 324,\n                          columnNumber: 31\n                        }, this)]\n                      }, _id, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 299,\n                        columnNumber: 29\n                      }, this);\n                    })\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 293,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 283,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 282,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 281,\n              columnNumber: 17\n            }, this), questionList.length <= 0 && /*#__PURE__*/_jsxDEV(Box, {\n              textAlign: \"center\",\n              mt: 5,\n              children: [' ', /*#__PURE__*/_jsxDEV(Typography, {\n                children: \"Hi\\u1EC7n t\\u1EA1i ch\\u01B0a c\\xF3 c\\xE2u h\\u1ECFi n\\xE0o\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 340,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 338,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(TablePagination, {\n              rowsPerPageOptions: [5, 10, 15, 20, 25],\n              component: \"div\",\n              count: count,\n              rowsPerPage: filters.limit,\n              page: filters.page,\n              onPageChange: handleChangePage,\n              onRowsPerPageChange: handleChangeRowsPerPage\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 343,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Dialog, {\n      open: open,\n      onClose: () => setOpen(false),\n      \"aria-labelledby\": \"alert-dialog-title\",\n      \"aria-describedby\": \"alert-dialog-description\",\n      children: [/*#__PURE__*/_jsxDEV(DialogTitle, {\n        id: \"alert-dialog-title\",\n        children: \"X\\xF3a Danh M\\u1EE5c\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 363,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DialogContent, {\n        children: /*#__PURE__*/_jsxDEV(DialogContentText, {\n          id: \"alert-dialog-description\",\n          children: \"B\\u1EA1n c\\xF3 ch\\u0103c ch\\u1EAFn mu\\u1ED1n x\\xF3a danh m\\u1EE5c n\\xE0y kh\\xF4ng ?\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 365,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 364,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DialogActions, {\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          onClick: () => setOpen(false),\n          color: \"primary\",\n          children: \"H\\u1EE7y\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 370,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          onClick: () => onDeleteQuestion(),\n          color: \"primary\",\n          autoFocus: true,\n          children: \"\\u0110\\u1ED3ng \\xFD\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 373,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 369,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 357,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(ListQuestion, \"IIL/U84nilRXvC6pCa/rCZMYwtE=\", false, function () {\n  return [useHistory];\n});\n\n_c = ListQuestion;\n\nvar _c;\n\n$RefreshReg$(_c, \"ListQuestion\");","map":{"version":3,"sources":["/home/haopc/Desktop/Workspace/hquiz.com/CMS/src/features/Question/pages/List.js"],"names":["plusFill","Icon","Autocomplete","Button","Card","Checkbox","CircularProgress","Container","Dialog","DialogActions","DialogContent","DialogContentText","DialogTitle","FormControl","Grid","InputLabel","MenuItem","Select","Stack","Table","TableBody","TableCell","TableContainer","TablePagination","TableRow","TextField","Typography","Box","questionApi","topicApi","sentenceCase","ListToolbar","MoreMenu","TableHeadList","Label","Page","Scrollbar","STATUS_LIST","React","useCallback","useEffect","useState","Link","RouterLink","useHistory","toast","TABLE_HEAD","id","label","alignRight","ListQuestion","history","open","setOpen","openSelect","setOpenSelect","idDelete","setIdDelete","selected","setSelected","count","setCount","loading","setLoading","loadingTopic","setLoadingTopic","questionList","setQuestionList","topicList","setTopicList","filters","setFilters","order","orderBy","page","limit","title_like","topic","status","fetchListQuestion","res","getList","pagination","data","console","log","_total","error","fetchTopicList","response","handleRequestSort","event","property","isAsc","prev","handleSelectAllClick","target","checked","newSelecteds","map","n","_id","handleClick","name","selectedIndex","indexOf","newSelected","concat","slice","length","handleChangePage","newPage","handleChangeRowsPerPage","parseInt","value","handleDelete","categoryId","onDeleteQuestion","delete","success","respose","handleFilterByName","search","handleChangSearchTopic","option","params","InputProps","endAdornment","index","lable","minWidth","row","title","isItemSelected","isStatus","push"],"mappings":"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","sourcesContent":["import plusFill from '@iconify/icons-eva/plus-fill';\nimport { Icon } from '@iconify/react';\nimport {\n  Autocomplete,\n  Button,\n  Card,\n  Checkbox,\n  CircularProgress,\n  Container,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  DialogTitle,\n  FormControl,\n  Grid,\n  InputLabel,\n  MenuItem,\n  Select,\n  Stack,\n  Table,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TablePagination,\n  TableRow,\n  TextField,\n  Typography\n} from '@material-ui/core';\nimport { Box } from '@material-ui/system';\nimport questionApi from 'apis/questionApi';\nimport topicApi from 'apis/topicApi';\nimport { sentenceCase } from 'change-case';\nimport { ListToolbar, MoreMenu, TableHeadList } from 'components/common';\nimport Label from 'components/Label';\nimport Page from 'components/Page';\nimport Scrollbar from 'components/Scrollbar';\nimport { STATUS_LIST } from 'constants/index';\nimport React, { useCallback, useEffect, useState } from 'react';\nimport { Link as RouterLink, useHistory } from 'react-router-dom';\nimport { toast } from 'react-toastify';\n\nconst TABLE_HEAD = [\n  { id: 'title', label: 'Title', alignRight: false },\n  { id: 'id', label: 'Id', alignRight: false },\n  { id: 'topic', label: 'Topic', alignRight: false },\n  { id: 'status', label: 'Status', alignRight: false },\n  { id: '' }\n];\nexport const ListQuestion = () => {\n  const history = useHistory();\n\n  const [open, setOpen] = useState(false);\n  const [openSelect, setOpenSelect] = useState(false);\n  const [idDelete, setIdDelete] = useState('');\n  const [selected, setSelected] = useState([]);\n  const [count, setCount] = useState(20);\n  const [loading, setLoading] = useState(false);\n  const [loadingTopic, setLoadingTopic] = useState(false);\n  const [questionList, setQuestionList] = useState([]);\n  const [topicList, setTopicList] = useState([]);\n  const [filters, setFilters] = useState({\n    order: 'asc',\n    orderBy: 'title',\n    page: 0,\n    limit: 20,\n    title_like: '',\n    topic: '',\n    status: ''\n  });\n  const fetchListQuestion = useCallback(async (filters) => {\n    try {\n      setLoading(true);\n      const res = await questionApi.getList({ ...filters, page: filters.page + 1 });\n      const { pagination, questionList } = res.data;\n      console.log({ pagination, questionList });\n      setQuestionList(questionList);\n      setCount(pagination._total);\n      setLoading(false);\n    } catch (error) {\n      setLoading(false);\n      setQuestionList([]);\n    }\n  }, []);\n  const fetchTopicList = async (filters) => {\n    try {\n      setLoadingTopic(true);\n      const res = await topicApi.getList(filters);\n      const { topic } = res.data;\n      setLoadingTopic(false);\n      setTopicList(topic);\n    } catch (error) {\n      setLoadingTopic(false);\n      toast.error(error.response.data.error);\n    }\n  };\n  useEffect(() => {\n    fetchListQuestion(filters);\n  }, [filters, fetchListQuestion]);\n  useEffect(() => {\n    if (!openSelect) {\n      setTopicList([]);\n    }\n  }, [openSelect]);\n  // Function Table\n  const handleRequestSort = (event, property) => {\n    const isAsc = filters.orderBy === property && filters.order === 'asc';\n    setFilters((prev) => ({\n      ...prev,\n      order: isAsc ? 'desc' : 'asc',\n      orderBy: property\n    }));\n  };\n  const handleSelectAllClick = (event) => {\n    if (event.target.checked) {\n      const newSelecteds = questionList.map((n) => n._id);\n      setSelected(newSelecteds);\n      return;\n    }\n    setSelected([]);\n  };\n  const handleClick = (event, name) => {\n    const selectedIndex = selected.indexOf(name);\n    let newSelected = [];\n    if (selectedIndex === -1) {\n      newSelected = newSelected.concat(selected, name);\n    } else if (selectedIndex === 0) {\n      newSelected = newSelected.concat(selected.slice(1));\n    } else if (selectedIndex === selected.length - 1) {\n      newSelected = newSelected.concat(selected.slice(0, -1));\n    } else if (selectedIndex > 0) {\n      newSelected = newSelected.concat(\n        selected.slice(0, selectedIndex),\n        selected.slice(selectedIndex + 1)\n      );\n    }\n    setSelected(newSelected);\n  };\n  const handleChangePage = (event, newPage) => {\n    setFilters((prev) => ({\n      ...prev,\n      page: newPage\n    }));\n  };\n  const handleChangeRowsPerPage = (event) => {\n    setFilters((prev) => ({\n      ...prev,\n      limit: parseInt(event.target.value, 10),\n      page: 0\n    }));\n  };\n\n  // Handle Question\n  const handleDelete = (categoryId) => {\n    setOpen(true);\n    if (typeof categoryId === 'string') {\n      setIdDelete([].concat(categoryId));\n      return;\n    }\n    setIdDelete(categoryId);\n  };\n  const onDeleteQuestion = async () => {\n    try {\n      await questionApi.delete(idDelete);\n      toast.success('Xóa câu hỏi thành công');\n      fetchListQuestion(filters);\n      setOpen(false);\n      setSelected([]);\n      setFilters((prev) => ({\n        ...prev,\n        page: 0\n      }));\n    } catch (error) {\n      toast.error(error.respose.data.error);\n      setOpen(false);\n    }\n  };\n  const handleFilterByName = (search) => {\n    setFilters((prev) => ({\n      ...prev,\n      title_like: search,\n      page: 0\n    }));\n  };\n  // Handle Topic\n  const handleChangSearchTopic = (search) => {\n    fetchTopicList({ limit: 1000, title_like: search });\n  };\n  return (\n    <>\n      <Page title=\"Câu hỏi | CMS\">\n        <Container maxWidth=\"2xl\">\n          <Stack direction=\"row\" alignItems=\"center\" justifyContent=\"space-between\" mb={5}>\n            <Typography variant=\"h4\" gutterBottom>\n              Danh sách câu hỏi\n            </Typography>\n            <Button\n              variant=\"contained\"\n              component={RouterLink}\n              to=\"/dashboard/question/create\"\n              startIcon={<Icon icon={plusFill} />}\n            >\n              Tạo câu hỏi\n            </Button>\n          </Stack>\n          <Card>\n            <ListToolbar\n              numSelected={selected.length}\n              onFilterName={handleFilterByName}\n              handleDelete={() => handleDelete(selected)}\n            />\n            <Grid container padding={1} pb={4} spacing={1}>\n              <Grid item xs={3}>\n                <Autocomplete\n                  fullWidth\n                  open={openSelect}\n                  onOpen={() => setOpenSelect(true)}\n                  onClose={() => setOpenSelect(false)}\n                  id=\"topic\"\n                  options={topicList}\n                  getOptionLabel={(option) => option.name}\n                  getOptionSelected={(option, value) => option.name === value.name}\n                  onInputChange={(event) => handleChangSearchTopic(event.target.value)}\n                  onChange={(event, value) =>\n                    setFilters((prev) => ({\n                      ...prev,\n                      topic: value?._id || ''\n                    }))\n                  }\n                  renderInput={(params) => (\n                    <TextField\n                      {...params}\n                      label=\"Đề thi\"\n                      variant=\"outlined\"\n                      InputProps={{\n                        ...params.InputProps,\n                        endAdornment: (\n                          <>\n                            {loadingTopic ? <CircularProgress color=\"inherit\" size={20} /> : null}\n                            {params.InputProps.endAdornment}\n                          </>\n                        )\n                      }}\n                    />\n                  )}\n                />\n              </Grid>\n              <Grid item xs={2}>\n                <FormControl variant=\"outlined\" fullWidth>\n                  <InputLabel id=\"status\">Trạng thái</InputLabel>\n                  <Select\n                    defaultValue=\"\"\n                    labelId=\"status\"\n                    id=\"status\"\n                    label=\"Trạng thái\"\n                    onChange={(event) =>\n                      setFilters((prev) => ({\n                        ...prev,\n                        status: event.target.value\n                      }))\n                    }\n                  >\n                    <MenuItem value=\"\">\n                      <em>Tất cả</em>\n                    </MenuItem>\n                    {STATUS_LIST.map((status, index) => (\n                      <MenuItem value={status.value} key={index}>\n                        {status.lable}\n                      </MenuItem>\n                    ))}\n                  </Select>\n                </FormControl>\n              </Grid>\n            </Grid>\n            {loading ? (\n              <Stack mb={2} display=\"flex\" alignItems=\"center\">\n                <CircularProgress color=\"primary\" />\n              </Stack>\n            ) : (\n              <>\n                <Scrollbar>\n                  <TableContainer sx={{ minWidth: 800 }}>\n                    <Table>\n                      <TableHeadList\n                        headLabel={TABLE_HEAD}\n                        order={filters.order}\n                        orderBy={filters.orderBy}\n                        numSelected={selected.length}\n                        onRequestSort={handleRequestSort}\n                        onSelectAllClick={handleSelectAllClick}\n                        rowCount={questionList.length}\n                      />\n                      <TableBody>\n                        {questionList.map((row) => {\n                          const { _id, title, topic, status } = row;\n                          const isItemSelected = selected.indexOf(_id) !== -1;\n                          const isStatus = status === 'ACTIVE' ? 'success' : 'banned';\n                          return (\n                            <TableRow\n                              hover\n                              key={_id}\n                              tabIndex={-1}\n                              role=\"checkbox\"\n                              selected={isItemSelected}\n                              aria-checked={isItemSelected}\n                            >\n                              <TableCell padding=\"checkbox\">\n                                <Checkbox\n                                  checked={isItemSelected}\n                                  onChange={(event) => handleClick(event, _id)}\n                                />\n                              </TableCell>\n                              <TableCell align=\"left\">{title}</TableCell>\n                              <TableCell align=\"left\">{_id}</TableCell>\n                              <TableCell align=\"left\">{topic}</TableCell>\n                              <TableCell align=\"left\">\n                                <Label\n                                  variant=\"ghost\"\n                                  color={(isStatus === 'banned' && 'error') || 'success'}\n                                >\n                                  {sentenceCase(status)}\n                                </Label>\n                              </TableCell>\n                              <TableCell align=\"left\">\n                                <MoreMenu\n                                  handleDelete={() => handleDelete(_id)}\n                                  handleEdit={() => history.push('/dashboard/topic')}\n                                />\n                              </TableCell>\n                            </TableRow>\n                          );\n                        })}\n                      </TableBody>\n                    </Table>\n                  </TableContainer>\n                </Scrollbar>\n                {questionList.length <= 0 && (\n                  <Box textAlign=\"center\" mt={5}>\n                    {' '}\n                    <Typography>Hiện tại chưa có câu hỏi nào</Typography>\n                  </Box>\n                )}\n                <TablePagination\n                  rowsPerPageOptions={[5, 10, 15, 20, 25]}\n                  component=\"div\"\n                  count={count}\n                  rowsPerPage={filters.limit}\n                  page={filters.page}\n                  onPageChange={handleChangePage}\n                  onRowsPerPageChange={handleChangeRowsPerPage}\n                />\n              </>\n            )}\n          </Card>\n        </Container>\n      </Page>\n      <Dialog\n        open={open}\n        onClose={() => setOpen(false)}\n        aria-labelledby=\"alert-dialog-title\"\n        aria-describedby=\"alert-dialog-description\"\n      >\n        <DialogTitle id=\"alert-dialog-title\">Xóa Danh Mục</DialogTitle>\n        <DialogContent>\n          <DialogContentText id=\"alert-dialog-description\">\n            Bạn có chăc chắn muốn xóa danh mục này không ?\n          </DialogContentText>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={() => setOpen(false)} color=\"primary\">\n            Hủy\n          </Button>\n          <Button onClick={() => onDeleteQuestion()} color=\"primary\" autoFocus>\n            Đồng ý\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}